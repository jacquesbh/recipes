/**
 * JbhSlider, a simple jQuery slider. v1.0.5.2
 *
 * http://jbhslider.projects.bodin-hullin.net/
 *
 *  ***
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Lesser General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public License
 * along with this program. If not, see <http://www.gnu.org/licenses/lgpl.html>.
 *
 *  ***
 *
 * @author Jacques Bodin-Hullin <http://www.bodin-hullin.net>
 * @version 1.0.5.2
 */

if(!jQuery.fn.jbhSlider){(function(e){var t="1.0.5.2";var n={init:function(e){},selector:"> ul",cssClass:"jbhSlider",elements:{selector:"> li",cssClass:"jbhSliderItem",css:{}},css:{width:500,height:250},transition:{type:"fade",duration:1e3,timer:3e3,actionStopTimer:true,mouseHoverStop:true,before:function(e,t,n){n()},success:function(e,t){},maxZIndex:300,repeat:-1},pagination:{type:null,text:"{{page}}",cssClass:"jbhSliderPages",id:null,currentCssClass:"current",tag:"ol",subTag:"li",position:"after",container:null},navigation:{active:true,cssClass:"jbhSliderNavigation",id:null,loop:true,tag:"ul",subTag:"li",next:{text:">",cssClass:"jbhSliderNavigationNext"},previous:{text:"<",cssClass:"jbhSliderNavigationPrevious"},position:"after",container:null}};var r=0;var i={version:function(){return this.version},init:function(t){var i={};e.extend(true,i,n,t);$this=this;$ul=i.selector!=null?$this.find(i.selector):$this;$liList=$ul.find(i.elements.selector);$this.addClass(i.cssClass).css(e.extend({},i.css,{overflow:"hidden"}));$liList.addClass(i.elements.cssClass);if($liList.length<2){return $this}i.data={isJbhSlider:true,ul:$ul,liList:$liList,inTransitionTo:e($liList[0]),mouseIn:false};count=$liList.length;$this.data({settings:i,jbhSliderInit:true,count:count,repetitions:0,current:e($liList[0]),to:null});for(r=0;r<count;r++){e.data($liList[r],{slider:$this,pos:r+1,first:false,last:false})}e.data($liList[0],"first",true);e.data($liList[count-1],"last",true);$this.hover(function(){e(this).data("mouseIn",e.data("settings").transition.mouseHoverStop)},function(){e(this).data("mouseIn",false)});var s=null;var o=null;if(!i.selector){i.transition.type="fade"}switch(i.transition.type){case"horizontal-left":o=function(t){var n=t.data("settings");t.css({position:"relative"});n.data.ul.css(e.extend({},n.css,{position:"absolute",top:0,left:0,width:n.css.width*count}));n.data.liList.css(e.extend({},Object.keys(n.elements.css).length?n.elements.css:n.css,{"float":"left"}));e(n.data.liList[0]).css({opacity:1})};s=function(e,t,n){var r=e.data("settings");r.data.ul.animate({left:(n.data("pos")-1)*-r.css.width},r.transition.duration,function(){e.jbhSlider("_transitionSuccess",t,n)})};break;case"horizontal-right":o=function(t){var n=t.data("settings");t.css({position:"relative"});n.data.ul.css(e.extend({},n.css,{position:"absolute",top:0,right:0,width:n.css.width*count}));n.data.liList.css(e.extend({},Object.keys(n.elements.css).length?n.elements.css:n.css,{"float":"right"}));e(n.data.liList[0]).css({opacity:1})};s=function(e,t,n){var r=e.data("settings");r.data.ul.animate({right:(n.data("pos")-1)*-r.css.width},r.transition.duration,function(){e.jbhSlider("_transitionSuccess",t,n)})};break;case"fade":default:i.data.zIndex=1;o=function(t){var n=t.data("settings");n.data.ul.css(e.extend({},n.css,{position:"relative"}));n.data.liList.css(e.extend({},Object.keys(n.elements.css).length?n.elements.css:n.css,{position:"absolute",top:0,left:0,opacity:0}));e(n.data.liList[0]).css({opacity:1,zIndex:n.data.zIndex})};s=function(t,n,s){n.stop(true);s.stop(true);n.animate({opacity:0},i.transition.duration);s.animate({opacity:1},i.transition.duration,function(){s.css("z-index",++i.data.zIndex);t.jbhSlider("_transitionSuccess",n,s);var o=t.data("count");var u=i.transition.maxZIndex;if(i.data.zIndex>u+o){for(r=0;r<=o-1;r++){e(i.data.liList[r]).css("z-index",e(i.data.liList[r]).css("z-index")-u)}i.data.zIndex=o+1}})};break}i.init($this);o($this);i.data.transition=s;if(i.transition.timer>0){$this.jbhSlider("_loadTimer")}var u=e("<"+i.pagination.tag+"></"+i.pagination.tag+">");u.addClass(i.pagination.cssClass);if(i.pagination.id){u.attr("id",i.pagination.id)}i.pagination.element=u;switch(i.pagination.type){case"numbers":i.pagination.text="{{page}}";break;case"custom":break;case"bullets":i.pagination.text="â€¢";default:break}i.pagination.elements=new Array;for(r=1;r<=$this.data("count");r++){var a=e('<a href="#"></a>');$li=e($liList[r-1]);a.data({slider:$this,to:$li});a.html(i.pagination.text.replace("{{page}}",r)).click(function(){var t=e(this);var n=t.data("slider");n.jbhSlider("_slide",e(this).data("to"),s,true);return false});$li.data("pager",a);if(i.pagination.subTag!=null&&i.pagination.subTag.length>0){u.append(e("<"+i.pagination.subTag+"></"+i.pagination.subTag+">").append(a))}else{u.append(a)}i.pagination.elements[r-1]=a}if(i.pagination.subTag!=null&&i.pagination.subTag.length>0){u.find(i.pagination.subTag+":first").addClass(i.pagination.currentCssClass)}i.pagination.last=u.find("a:first").addClass(i.pagination.currentCssClass);if(i.pagination.type!=null&&i.pagination.type.length>0){var f=$this;if(i.pagination.container!=null){f=e(i.pagination.container);if(i.pagination.position=="before"){f.prepend(u)}else{f.append(u)}}else{if(i.pagination.position=="before"){f.before(u)}else{f.after(u)}}}var l=e("<"+i.navigation.tag+"></"+i.navigation.tag+">");l.addClass(i.navigation.cssClass);if(i.navigation.id){l.attr("id",i.navigation.id)}i.navigation.element=l;var c=null;if(i.navigation.previous.link==null){c=e('<a href="#"></a>');i.navigation.previous.link=c}else{c=i.navigation.previous.link}c.addClass(i.navigation.previous.cssClass);c.data("slider",$this);if(i.navigation.loop){$this.data("previous",e($liList[count-1]));c.css("visibility","visible")}else{$this.data("previous",null);c.css("visibility","hidden")}c.html(i.navigation.previous.text).click(function(){e(this).data("slider").jbhSlider("previous",true);return false});if(i.navigation.subTag!=null&&i.navigation.subTag.length>0){l.append(e("<"+i.navigation.subTag+"></"+i.navigation.subTag+">").append(c))}else{l.append(c)}var h=null;if(i.navigation.next.link==null){h=e('<a href="#"></a>');i.navigation.next.link=h}else{h=i.navigation.next.link}h.addClass(i.navigation.next.cssClass);h.data("slider",$this);h.css("display",null);$this.data("next",e($liList[1]));h.html(i.navigation.next.text).click(function(){e(this).data("slider").jbhSlider("next",true);return false});if(i.navigation.subTag!=null&&i.navigation.subTag.length>0){l.append(e("<"+i.navigation.subTag+"></"+i.navigation.subTag+">").append(h))}else{l.append(h)}if(i.navigation.active){var p=$this;if(i.navigation.container!=null){p=e(i.navigation.container);if(i.navigation.position=="before"){p.prepend(l)}else{p.append(l)}}else{if(i.navigation.position=="before"){p.before(l)}else{p.after(l)}}}return $this},_slide:function(e,t,n){if(e==null){return this}var r=this;var i=r.data("settings");if(n==true&&i.transition.actionStopTimer){this.jbhSlider("_killTimer")}if(i.data.inTransitionTo.data("pos")!=e.data("pos")){i.data.inTransitionTo=e;r.jbhSlider("_stopAnim",e);i.transition.before(r,e,function(){t(r,r.data("current"),e);r.jbhSlider("_updatePagination",e);r.jbhSlider("_updateNavigation",e)})}return this},slide:function(e){var t=null;for(r=0;r<this.data("count");r++){var n=this.data("settings").pagination.elements[r];if(n.data("to").data("pos")==e){t=n.data("to");break}}this.jbhSlider("_slide",t,this.data("settings").data.transition,true)},_transitionSuccess:function(e,t){this.data("settings").transition.success(this,t);this.data("current",t);if(this.data("timer")!=null){this.jbhSlider("_updateRepetitions",e,t)}},_updateRepetitions:function(e,t){var n=this.data("settings").data.liList;if(t.data("pos")==1&&e.data("pos")==n.length){this.data("repetitions",this.data("repetitions")+1);if(this.data("repetitions")==this.data("settings").transition.repeat){this.jbhSlider("_killTimer")}}},_stopAnim:function(t){var n=this;var i=n.data("settings");switch(i.transition.type){case"horizontal-left":case"horizontal-right":i.data.ul.stop(true);break;case"fade":default:var s=i.data.liList;s.stop(true);for(r=0;r<n.data("count");r++){if(r!=t.data("pos")-1){var o=e(s[r]);if(o.css("opacity")!=0&&o.data("pos")!=n.data("current").data("pos")){o.animate({opacity:0},i.transition.duration)}}}break}},_updatePagination:function(e){var t=this.data("settings");if(t.pagination.last.data("to")!=e){t.pagination.last.removeClass(t.pagination.currentCssClass);if(t.pagination.subTag!=null&&t.pagination.subTag.length>0){t.pagination.last.parent().removeClass(t.pagination.currentCssClass)}t.pagination.last=e.data("pager").addClass(t.pagination.currentCssClass);if(t.pagination.subTag!=null&&t.pagination.subTag.length>0){e.data("pager").parent().addClass(t.pagination.currentCssClass)}}},_loadTimer:function(){function t(){if(e.data("mouseIn")!=true){e.jbhSlider("next")}e.data("timer",setTimeout(t,e.data("settings").transition.timer))}var e=this;this.data("timer",setTimeout(t,this.data("settings").transition.timer))},_killTimer:function(){if(this.data("timer")!=null){clearTimeout(this.data("timer"));this.data("timer",null)}},next:function(e){this.jbhSlider("_slide",this.data("next"),this.data("settings").data.transition,e)},previous:function(e){this.jbhSlider("_slide",this.data("previous"),this.data("settings").data.transition,e)},_updateNavigation:function(t){var n=e(this);var r=n.data("settings");var i=r.navigation.active;var s=n.data("count");if(i){var o=r.navigation.next.link}if(t.data("pos")==s){if(r.navigation.loop==true){if(i){o.css("visibility","visible")}n.data("next",e(r.data.liList[0]))}else{if(i){o.css("visibility","hidden")}n.data("next",null)}}else{if(i){o.css("visibility","visible")}n.data("next",e(r.data.liList[t.data("pos")]))}if(i){var u=r.navigation.previous.link}if(t.data("pos")==1){if(r.navigation.loop==true){if(i){u.css("visibility","visible")}n.data("previous",e(r.data.liList[s-1]))}else{if(i){u.css("visibility","hidden")}n.data("previous",null)}}else{if(i){u.css("visibility","visible")}n.data("previous",e(r.data.liList[t.data("pos")-2]))}}};e.fn.jbhSlider=function(t){if(i[t]){return i[t].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof t==="object"||!t){return i.init.apply(this,arguments)}e.error("Method "+t+" does not exist on jQuery.tooltip");return this}})(jQuery)}
